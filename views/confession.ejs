<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Confession | Celestial Trinity</title>
  <link rel="icon" href="/assets/favicon.ico" type="image/x-icon" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.4.1/dist/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous"/>
  <script src="https://kit.fontawesome.com/7a40b462da.js" crossorigin="anonymous"></script>
</head>
<body>

  <!-- Navigation Bar -->
  <section>
    <header class="header">
      <div id="menu-btn" class="fas fa-bars"></div>
      <a href="/" class="logo nav-item" id="logo">
        <img src="/assets/1.png" width="50px" height="50px" /><span class="hover-2">Celestial Revelation</span></a>
      <nav class="navbar" id="navbar">
        <a href="/" class="nav-item">Home</a>
        <a href="/feed" class="nav-item">Confessions</a>
        <a href="/images" class="nav-item">Images</a>
        <a href="/deleteconfession" class="nav-item">Delete Confession</a>
        <button class='glowing-btn' id="style-toggle"><span class='glowing-txt'>M<span class='faulty-letter'>A</span>GIC</span></button>
      </nav>
    </header>
  </section>

  <!-- Confession Card -->
<br> <br>
<section>
  <div class="confession-card">
    <p><%= confession.confession %></p> 
    <br>
    <p class="feed-ct"><%= formatTimeDifference(confession.createdAt) %></p>
  </div>
    <div class="comment-section">
      <h5><%= comments.length %> Comments</h5>
      <% if (comments.length > 0) { %>
        <ul id="comment-list">
          <% comments.forEach(comment => { %>
            <li>
              <div class="comment">
                <div class="avatar">
                  <img src="https://i.insider.com/64a325b16075be0019c28e16?width=1136&format=jpeg" alt="Avatar" class="avatar-img">
                </div>
                <div class="comment-bubble">
                  <span class="username">Anonymous user</span>
                  <p class="text"><%= comment.text %></p> <!-- display the comment text -->
                </div>
                <p class="feed-ct"><%= formatTimeDifference(comment.createdAt) %></p>
            </li>
          <% }); %>
        </ul>
      <% } else { %>
        <p>No comments yet.</p>
      <% } %>
      <form action="/post/<%= confession._id %>" method="post">
        <input type="text" name="text" placeholder="Add a comment...">
        <button type="submit">Post</button>
      </form>
    </div>
  </div>
</section>

  <!-- Footer -->
  <section>
    <div class="footer">
      <p>
        <h4>Celestial Trinity</h4>
        <a href="https://www.instagram.com/trinity.revelation/" target="_blank"><i class="fa-brands fa-square-instagram"></i> Instagram</a> <br>
        <a href="https://www.facebook.com/celestialreel" target="_blank"><i class="fa-brands fa-facebook"></i> Facebook
        </p> <hr>
        <p><b>Our Contributors</b> <br>Javascript by
                  <a href="https://www.instagram.com/soilhasnoblanket/" target="_blank"><b>@soilhasnoblanket</b></a> and <a href="https://www.instagram.com/sharior13" target="_blank"><b>@Sharior13</b></a><br>
                  HTML & CSS by
                  <a href="https://www.instagram.com/trinity.revelation/" target="_blank"><b>(s)</b></a>
                </p>
              </div>
  </section>

  <!-- Script for sidebar -->
  <script>
    let menu = document.querySelector("#menu-btn");
    let navbar = document.querySelector(".navbar");

    menu.onclick = () => {
      menu.classList.toggle("fa-times");
      navbar.classList.toggle("active");
    };

    window.onscroll = () => {
      menu.classList.remove("fa-times");
      navbar.classList.remove("active");
    };
  </script>
<script src="/theme.js"></script>
</body>
</html>
